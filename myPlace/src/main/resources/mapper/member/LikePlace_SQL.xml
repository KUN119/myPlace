<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="likePlace">

<!-- 게시판 목록 -->
    <select id="selectLikePlaceList" parameterType="hashmap" resultType="hashmap"> 
      <![CDATA[
         SELECT
            P.PLACE_NAME,
            P.PLACE_NUM,
            P.PLACE_LAT,
            P.PLACE_LNG
         FROM
            PLACE P
         JOIN
            LIKEPLACE L
         ON
            P.PLACE_NUM = L.LIKEPLACE_PLACE
         WHERE
            L.LIKEPLACE_MEM = #{MEM_ID}
      ]]>
   </select> 
	

	<!-- 찜하기 -->
	 <insert id="insertLikePlace" parameterType="hashmap">
		<![CDATA[
			INSERT INTO LIKEPLACE (        
			                    LIKEPLACE_MEM,
			                    LIKEPLACE_PLACE
			                    
			                    )
							VALUES (
			                     #{LIKEPLACE_MEM},
      							#{LIKEPLACE_PLACE}
			                    )
		]]>
	</insert>    
	
	<!-- 찜취소 -->
    <delete id="disLikePlace" parameterType="hashmap">
    <![CDATA[
        DELETE FROM LIKEPLACE
        WHERE LIKEPLACE_MEM = #{LIKEPLACE_MEM}
        AND LIKEPLACE_PLACE = #{LIKEPLACE_PLACE}
    ]]>
</delete> 

	<!-- 찜한 목록 -->
	<select id="selectLikePlace" parameterType="hashmap" resultType="hashmap">
	<![CDATA[
        SELECT 
        	LIKEPLACE_PLACE
        FROM
        	LIKEPLACE
        WHERE
        	LIKEPLACE_MEM = #{MEM_ID}
    ]]>
    </select>


	<!-- 장소를 좋아하는 사람의 아이디 출력 -->
	<select id="selectIdInLikePlace" parameterType="hashmap" resultType="hashmap"> 
		<![CDATA[
			SELECT M.MEM_ID
			FROM LIKEPLACE LP, PLACE P, MEMBER M 
			WHERE LP.LIKEPLACE_MEM = M.MEM_ID
			AND LP.LIKEPLACE_PLACE = P.PLACE_NUM
			AND LP.LIKEPLACE_PLACE = #{PLACE_NUM}
		]]>
	</select>

</mapper>